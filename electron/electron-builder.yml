appId: com.autoglm.gui
productName: AutoGLM GUI
copyright: Copyright © 2025

# 配置发布到 GitHub Releases
publish:
  provider: github
  owner: suyiiyii
  repo: AutoGLM-GUI
  releaseType: release

# 启用更新元数据生成
electronUpdaterCompatibility: ">=2.16"

# 使用本地 Electron，避免网络下载
electronDist: node_modules/electron/dist

# 打包后设置可执行权限
afterPack: ./afterPack.js

directories:
  output: dist
  buildResources: build

files:
  - "main.js"
  - "preload.js"
  - "afterPack.js"
  - "package.json"
  # 不显式配置 node_modules，让 electron-builder 自动从 dependencies 中包含运行时依赖

extraResources:
  - from: ../resources/backend
    to: backend
  - from: ../resources/adb
    to: adb
  - from: ../scrcpy-server-v3.3.3
    to: ./

win:
  target:
    - nsis       # 安装包（推荐）
    - portable   # 便携版
  icon: icon.ico
  publisherName: AutoGLM-GUI Team

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  perMachine: false  # 用户级安装，无需管理员权限

mac:
  target:
    - dmg
  icon: icon.icns
  category: public.app-category.developer-tools
  # 开发阶段不签名，使用 xattr -cr 移除隔离属性
  identity: null

dmg:
  # 启用 writeUpdateInfo 生成 latest-mac.yml（自动更新必需）
  writeUpdateInfo: true
  format: UDZO
  sign: false
  internetEnabled: false


linux:
  target:
    - AppImage    # 最通用的格式，无需安装
    - deb         # Debian/Ubuntu 系统
    - tar.gz      # 便携版
  category: Development
  icon: icon.png
  maintainer: suyiiyii <suyiiyii@gmail.com>
